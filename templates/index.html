<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Text-to-Speech | Neural Voice AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-microphone-alt"></i>
                <span>BARK AI TTS</span>
            </div>
            <div class="header-badge">
                <i class="fas fa-bolt"></i>
                <span>GPU Accelerated</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Panel - Input -->
            <section class="input-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-paste"></i> Paste Your Text</h2>
                    <div class="text-stats">
                        <span id="charCount">0</span> characters | 
                        <span id="lineCount">0</span> lines
                    </div>
                </div>
                
                <textarea 
                    id="textInput" 
                    placeholder="Paste any text here - code, articles, documents...&#10;&#10;This TTS properly reads:&#10;• Code with curly braces { }&#10;• Brackets [ ] and parentheses ( )&#10;• Operators like => -> == != && ||&#10;• camelCase and snake_case&#10;• Special symbols @ # $ % & *&#10;&#10;Nothing gets skipped!"
                    spellcheck="false"
                ></textarea>
                
                <div class="input-controls">
                    <button type="button" id="clearBtn" class="btn btn-secondary">
                        <i class="fas fa-eraser"></i> Clear
                    </button>
                    <button type="button" id="pasteBtn" class="btn btn-secondary">
                        <i class="fas fa-clipboard"></i> Paste from Clipboard
                    </button>
                    <button type="button" id="loadTextBtn" class="btn btn-primary">
                        <i class="fas fa-check"></i> Load Text
                    </button>
                </div>
            </section>

            <!-- Right Panel - Controls & Player -->
            <section class="control-panel">
                <!-- Voice Settings -->
                <div class="settings-card">
                    <h3><i class="fas fa-sliders-h"></i> Voice Settings</h3>
                    
                    <div class="setting-group">
                        <label for="voiceSelect">Neural Voice (BARK AI)</label>
                        <select id="voiceSelect">
                            <!-- Populated by JavaScript -->
                        </select>
                    </div>
                    
                    <div class="setting-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="readCodeSymbols" checked>
                            <span class="checkmark"></span>
                            Read code symbols aloud
                        </label>
                        <p class="setting-hint">Pronounces { } [ ] == => etc.</p>
                    </div>
                    
                    <div class="emotion-tags-hint">
                        <h4>✨ Emotion Tags</h4>
                        <p>Add to text for effects:</p>
                        <code>[laughter]</code> <code>[sighs]</code> <code>[gasps]</code>
                        <code>...</code> <code>♪ singing ♪</code>
                    </div>
                </div>

                <!-- Player Card -->
                <div class="player-card">
                    <h3><i class="fas fa-headphones"></i> Audio Player</h3>
                    
                    <!-- Current Line Display -->
                    <div class="current-line-display">
                        <div class="line-indicator">
                            <span class="line-label">Line</span>
                            <span id="currentLineNum" class="line-number">0</span>
                            <span class="line-separator">/</span>
                            <span id="totalLines" class="line-total">0</span>
                        </div>
                        <div id="currentLineText" class="current-text">
                            No text loaded
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div class="progress-container">
                        <div id="progressBar" class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                    </div>

                    <!-- Main Controls -->
                    <div class="player-controls">
                        <button type="button" id="prevLineBtn" class="control-btn" title="Previous Line (←)">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button type="button" id="rewindBtn" class="control-btn" title="Rewind Current Line (R)">
                            <i class="fas fa-undo"></i>
                        </button>
                        <button type="button" id="playPauseBtn" class="control-btn play-btn" title="Play/Pause (Space)">
                            <i class="fas fa-play" id="playPauseIcon"></i>
                        </button>
                        <button type="button" id="stopBtn" class="control-btn" title="Stop (S)">
                            <i class="fas fa-stop"></i>
                        </button>
                        <button type="button" id="nextLineBtn" class="control-btn" title="Next Line (→)">
                            <i class="fas fa-step-forward"></i>
                        </button>
                    </div>

                    <!-- Secondary Controls -->
                    <div class="secondary-controls">
                        <button type="button" id="downloadBtn" class="btn btn-secondary btn-sm">
                            <i class="fas fa-download"></i> Download MP3
                        </button>
                        <button type="button" id="clearCacheBtn" class="btn btn-secondary btn-sm">
                            <i class="fas fa-trash-alt"></i> Clear Cache
                        </button>
                    </div>
                </div>

                <!-- Line Navigator -->
                <div class="line-navigator-card">
                    <h3><i class="fas fa-list-ol"></i> Line Navigator</h3>
                    <div id="lineList" class="line-list">
                        <p class="empty-message">Load text to see lines</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div id="statusMessage" class="status-message">
                <i class="fas fa-info-circle"></i>
                <span>Ready - Paste text and click Load Text to begin</span>
            </div>
            <div class="keyboard-hints">
                <span><kbd>Space</kbd> Play/Pause</span>
                <span><kbd>R</kbd> Rewind</span>
                <span><kbd>←</kbd> Previous</span>
                <span><kbd>→</kbd> Next</span>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p id="loadingText">Generating audio...</p>
        </div>
    </div>

    <!-- Audio Element (hidden) -->
    <audio id="audioPlayer"></audio>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
